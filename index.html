<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>TrickTree ‚Äî Skateboarding Skill Tree & Progression Tracker</title>
  <meta name="description" content="Track your skateboarding progression with an interactive skill tree. Unlock tricks, see prerequisites, and visualize your journey from pushing to tre flips.">
  <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üå≥</text></svg>">
  <style>
    :root {
      --bg: #0f0f0f;
      --surface: #1a1a1a;
      --surface2: #252525;
      --border: #333;
      --text: #e8e8e8;
      --text-dim: #888;
      --green: #4ade80;
      --green-dim: #166534;
      --blue: #60a5fa;
      --purple: #a78bfa;
      --orange: #fb923c;
      --red: #f87171;
      --yellow: #facc15;
    }
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
      background: var(--bg);
      color: var(--text);
      min-height: 100vh;
    }
    header {
      text-align: center;
      padding: 2rem 1rem 1rem;
      border-bottom: 1px solid var(--border);
    }
    header h1 { font-size: 2rem; margin-bottom: 0.25rem; }
    header h1 span { color: var(--green); }
    header p { color: var(--text-dim); font-size: 0.95rem; }
    .stats-bar {
      display: flex;
      justify-content: center;
      gap: 2rem;
      padding: 1rem;
      background: var(--surface);
      border-bottom: 1px solid var(--border);
      flex-wrap: wrap;
    }
    .stat { text-align: center; }
    .stat-value { font-size: 1.5rem; font-weight: 700; color: var(--green); }
    .stat-label { font-size: 0.75rem; color: var(--text-dim); text-transform: uppercase; letter-spacing: 0.05em; }
    .controls {
      display: flex;
      justify-content: center;
      gap: 0.5rem;
      padding: 1rem;
      flex-wrap: wrap;
    }
    .controls button {
      padding: 0.5rem 1rem;
      border: 1px solid var(--border);
      background: var(--surface);
      color: var(--text);
      border-radius: 6px;
      cursor: pointer;
      font-size: 0.85rem;
      transition: all 0.2s;
    }
    .controls button:hover { border-color: var(--green); }
    .controls button.active { background: var(--green-dim); border-color: var(--green); color: var(--green); }
    .tree-container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 1rem;
    }
    .category-section { margin-bottom: 2rem; }
    .category-title {
      font-size: 1.1rem;
      font-weight: 600;
      margin-bottom: 0.75rem;
      padding: 0.5rem 0;
      border-bottom: 1px solid var(--border);
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }
    .category-icon { font-size: 1.2rem; }
    .tricks-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
      gap: 0.75rem;
    }
    .trick-card {
      background: var(--surface);
      border: 2px solid var(--border);
      border-radius: 10px;
      padding: 1rem;
      cursor: pointer;
      transition: all 0.2s;
      position: relative;
    }
    .trick-card:hover { border-color: var(--blue); transform: translateY(-2px); }
    .trick-card.unlocked { border-color: var(--green); background: linear-gradient(135deg, var(--surface), var(--green-dim)); }
    .trick-card.locked { opacity: 0.4; cursor: not-allowed; }
    .trick-card.available { border-color: var(--yellow); border-style: dashed; }
    .trick-name { font-weight: 600; font-size: 1rem; margin-bottom: 0.25rem; }
    .trick-diff {
      display: inline-flex;
      gap: 2px;
      margin-bottom: 0.5rem;
    }
    .trick-diff .dot {
      width: 8px;
      height: 8px;
      border-radius: 50%;
      background: var(--border);
    }
    .trick-diff .dot.filled { background: var(--orange); }
    .trick-desc {
      font-size: 0.8rem;
      color: var(--text-dim);
      line-height: 1.4;
      margin-bottom: 0.5rem;
    }
    .trick-prereqs {
      font-size: 0.7rem;
      color: var(--text-dim);
    }
    .trick-prereqs span { color: var(--blue); }
    .trick-check {
      position: absolute;
      top: 0.75rem;
      right: 0.75rem;
      font-size: 1.2rem;
    }
    /* Modal */
    .modal-overlay {
      display: none;
      position: fixed;
      inset: 0;
      background: rgba(0,0,0,0.7);
      z-index: 100;
      justify-content: center;
      align-items: center;
      padding: 1rem;
    }
    .modal-overlay.open { display: flex; }
    .modal {
      background: var(--surface2);
      border: 1px solid var(--border);
      border-radius: 12px;
      max-width: 450px;
      width: 100%;
      padding: 1.5rem;
    }
    .modal h2 { margin-bottom: 0.5rem; }
    .modal .desc { color: var(--text-dim); margin-bottom: 1rem; line-height: 1.5; }
    .modal .tips { background: var(--surface); padding: 0.75rem; border-radius: 8px; margin-bottom: 1rem; font-size: 0.9rem; line-height: 1.5; }
    .modal .tips strong { color: var(--yellow); }
    .modal .prereq-list { margin-bottom: 1rem; }
    .modal .prereq-list span { display: inline-block; background: var(--surface); padding: 0.25rem 0.5rem; border-radius: 4px; margin: 0.25rem; font-size: 0.85rem; }
    .modal .prereq-list span.done { color: var(--green); }
    .modal .prereq-list span.pending { color: var(--red); }
    .modal-actions { display: flex; gap: 0.5rem; }
    .modal-actions button {
      flex: 1;
      padding: 0.75rem;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      font-size: 0.95rem;
      font-weight: 600;
    }
    .btn-unlock { background: var(--green); color: #000; }
    .btn-lock { background: var(--surface); color: var(--text); border: 1px solid var(--border) !important; }
    .btn-close { background: var(--surface); color: var(--text-dim); }
    .btn-disabled { background: var(--surface); color: var(--text-dim); cursor: not-allowed; opacity: 0.5; }
    footer { text-align: center; padding: 2rem; color: var(--text-dim); font-size: 0.8rem; }
    footer a { color: var(--blue); text-decoration: none; }
  </style>
</head>
<body>
  <header>
    <h1>üå≥ Trick<span>Tree</span></h1>
    <p>Track your skateboarding progression ‚Äî unlock tricks as you learn them</p>
  </header>
  <div class="stats-bar" id="stats"></div>
  <div class="controls" id="controls"></div>
  <div class="tree-container" id="tree"></div>
  <div class="modal-overlay" id="modal-overlay">
    <div class="modal" id="modal"></div>
  </div>
  <footer>
    <p>TrickTree ‚Äî Your progress is saved locally in your browser.</p>
    <p style="margin-top:0.5rem"><a href="https://github.com/clawdiard/tricktree">GitHub</a></p>
  </footer>
  <script>
    const CATEGORIES = {
      basics: { name: 'Basics', icon: 'üõπ' },
      fundamentals: { name: 'Fundamentals', icon: '‚≠ê' },
      flips: { name: 'Flip Tricks', icon: 'üîÑ' },
      grinds: { name: 'Grinds & Slides', icon: '‚ö°' },
      transition: { name: 'Transition', icon: 'üèÑ' }
    };
    let tricks = [];
    let unlocked = JSON.parse(localStorage.getItem('tricktree-unlocked') || '[]');
    let filter = 'all';

    function save() { localStorage.setItem('tricktree-unlocked', JSON.stringify(unlocked)); }
    function isUnlocked(id) { return unlocked.includes(id); }
    function canUnlock(t) { return t.prereqs.every(p => isUnlocked(p)); }

    function getStatus(t) {
      if (isUnlocked(t.id)) return 'unlocked';
      if (canUnlock(t)) return 'available';
      return 'locked';
    }

    function renderStats() {
      const total = tricks.length;
      const done = unlocked.length;
      const avail = tricks.filter(t => !isUnlocked(t.id) && canUnlock(t)).length;
      const pct = total ? Math.round(done / total * 100) : 0;
      document.getElementById('stats').innerHTML = `
        <div class="stat"><div class="stat-value">${done}/${total}</div><div class="stat-label">Tricks Unlocked</div></div>
        <div class="stat"><div class="stat-value">${pct}%</div><div class="stat-label">Complete</div></div>
        <div class="stat"><div class="stat-value">${avail}</div><div class="stat-label">Ready to Learn</div></div>
      `;
    }

    function renderControls() {
      const cats = ['all', ...Object.keys(CATEGORIES)];
      document.getElementById('controls').innerHTML = cats.map(c =>
        `<button class="${filter === c ? 'active' : ''}" onclick="setFilter('${c}')">${c === 'all' ? 'üéØ All' : CATEGORIES[c].icon + ' ' + CATEGORIES[c].name}</button>`
      ).join('');
    }

    function setFilter(f) { filter = f; renderControls(); renderTree(); }

    function renderTree() {
      const container = document.getElementById('tree');
      const cats = filter === 'all' ? Object.keys(CATEGORIES) : [filter];
      container.innerHTML = cats.map(cat => {
        const catTricks = tricks.filter(t => t.category === cat);
        if (!catTricks.length) return '';
        return `
          <div class="category-section">
            <div class="category-title"><span class="category-icon">${CATEGORIES[cat].icon}</span> ${CATEGORIES[cat].name}</div>
            <div class="tricks-grid">
              ${catTricks.map(t => {
                const status = getStatus(t);
                return `
                  <div class="trick-card ${status}" onclick="${status !== 'locked' ? `openModal('${t.id}')` : ''}">
                    ${status === 'unlocked' ? '<div class="trick-check">‚úÖ</div>' : ''}
                    <div class="trick-name">${t.name}</div>
                    <div class="trick-diff">${Array.from({length: 10}, (_, i) => `<div class="dot ${i < t.difficulty ? 'filled' : ''}"></div>`).join('')}</div>
                    <div class="trick-desc">${t.description}</div>
                    ${t.prereqs.length ? `<div class="trick-prereqs">Requires: ${t.prereqs.map(p => `<span>${tricks.find(x=>x.id===p)?.name||p}</span>`).join(', ')}</div>` : ''}
                  </div>`;
              }).join('')}
            </div>
          </div>`;
      }).join('');
    }

    function openModal(id) {
      const t = tricks.find(x => x.id === id);
      if (!t) return;
      const status = getStatus(t);
      const isU = isUnlocked(t.id);
      document.getElementById('modal').innerHTML = `
        <h2>${t.name}</h2>
        <div class="desc">${t.description}</div>
        <div class="tips"><strong>üí° Tips:</strong> ${t.tips}</div>
        ${t.prereqs.length ? `<div class="prereq-list"><strong>Prerequisites:</strong><br>${t.prereqs.map(p => {
          const pt = tricks.find(x=>x.id===p);
          return `<span class="${isUnlocked(p)?'done':'pending'}">${isUnlocked(p)?'‚úÖ':'‚ùå'} ${pt?.name||p}</span>`;
        }).join('')}</div>` : ''}
        <div class="modal-actions">
          ${isU
            ? `<button class="btn-lock" onclick="toggleTrick('${t.id}')">üîí Unlearn</button>`
            : canUnlock(t)
              ? `<button class="btn-unlock" onclick="toggleTrick('${t.id}')">üéâ Mark as Learned!</button>`
              : `<button class="btn-disabled" disabled>üîí Prerequisites needed</button>`
          }
          <button class="btn-close" onclick="closeModal()">Close</button>
        </div>
      `;
      document.getElementById('modal-overlay').classList.add('open');
    }

    function closeModal() { document.getElementById('modal-overlay').classList.remove('open'); }
    document.getElementById('modal-overlay').addEventListener('click', e => { if (e.target === e.currentTarget) closeModal(); });

    function toggleTrick(id) {
      if (isUnlocked(id)) {
        // also unlearn anything that depends on this
        const deps = getDependents(id);
        unlocked = unlocked.filter(u => u !== id && !deps.includes(u));
      } else {
        unlocked.push(id);
      }
      save(); render(); closeModal();
    }

    function getDependents(id) {
      const direct = tricks.filter(t => t.prereqs.includes(id)).map(t => t.id);
      return direct.reduce((acc, d) => [...acc, d, ...getDependents(d)], []);
    }

    function render() { renderStats(); renderControls(); renderTree(); }

    fetch('data/tricks.json')
      .then(r => r.json())
      .then(data => { tricks = data; render(); });
  </script>
</body>
</html>
